# Require.md（当前版本）

## 1. 产品形态
- 仅保留本地模式（`local_file`）。
- 移除全部云端托管能力、存储状态看板、任务记录与任务轮询。
- 房间不再选择模式，固定为本地文件门禁播放。

## 2. 视频登记
- 用户在前端选择本地文件。
- 前端分块计算 SHA-256，提交 `contentHash` 到服务端。
- 服务端不接收/不保存视频源文件，仅保存视频元数据。
- 上传时可附带封面图（前端从视频中段随机抽帧生成）。

## 3. 播放与同步
- 播放状态（播放/暂停/进度/倍速/切集）全房间同步。
- 倍速同步给所有成员。
- 同一时刻仅播放一个集，支持自动下一集倒计时与取消。
- 新用户加入自动对齐当前房间进度。
- 漂移校正：轻微漂移微调，大漂移小跳转。

## 4. 本地文件门禁
- 服务端按“当前集”下发必需 `contentHash`。
- 客户端选择本地文件并计算 hash。
- hash 一致后发送 `local-file-verified` 解锁播放控制。
- 未通过校验用户可以聊天/语音，但播放更新会被拒绝。
- 切集后按新当前集重新校验。
- 文件映射只在当前会话内有效（刷新后需重新选择）。

## 5. 用户体系与权限
- 全站登录后可访问业务能力。
- 首个注册用户自动 Root，后续用户为普通用户。
- 房间仅创建者或 Root 可删除。
- Root 可查看并删除全量放映室。

## 6. 页面
- 登录页 `/`
- 上传页 `/upload`
- 视频/列表浏览页 `/videos`
- 放映室页 `/rooms/:roomId`
- Root 管理页 `/admin`
